{"version":3,"file":"static/js/311.8cc0fc4b.chunk.js","mappings":"4KAIA,MAYA,EAZmBA,KACf,MAAM,UAAEC,EAAS,cAAEC,IAAkBC,EAAAA,EAAAA,KAErC,OAAOF,GACHG,EAAAA,EAAAA,KAACC,EAAAA,EAAM,IACPH,GACAE,EAAAA,EAAAA,KAACE,EAAAA,GAAQ,CAACC,GAAG,WAEbH,EAAAA,EAAAA,KAACI,EAAAA,GAAM,GACV,C,wFCPL,MA+BA,EA/BgBL,KACZ,MAAMM,GAAWC,EAAAA,EAAAA,MACXC,GAAOC,EAAAA,EAAAA,KAAYC,IAAK,IAAAC,EAAA,OAAS,OAALD,QAAK,IAALA,GAAW,QAANC,EAALD,EAAOF,YAAI,IAAAG,OAAN,EAALA,EAAaC,QAAQ,KACjD,KAAEC,EAAI,UAAEC,EAAS,QAAEC,EAAO,MAAEC,EAAK,UAAElB,IAAcmB,EAAAA,EAAAA,IACnDC,EAAAA,EAAoBC,WACpB,CAAEC,KAAMC,QAAY,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAMc,OAASJ,EAAAA,EAAoBC,YAAcD,EAAAA,EAAoBK,qBASzF,OANAC,EAAAA,EAAAA,YAAU,KACFV,IAAcO,QAAY,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAMiB,QAC5BnB,GAASoB,EAAAA,EAAAA,IAAab,GAC1B,GACD,CAACC,EAAWD,EAAMP,EAAUE,EAAKiB,QAEhC3B,EACO,CAAEA,YAAWC,eAAe,GAGnCgB,GACAY,QAAQC,IAAIZ,EAAO,SACnBV,GAASuB,EAAAA,EAAAA,OACTX,EAAAA,EAAoBY,SACb,CAAEhC,YAAWC,eAAe,IAGhC,CACHA,cAAee,GAAcO,QAAY,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAMc,KAAOJ,EAAAA,EAAoBC,WACtErB,YACH,C","sources":["components/Layout/AuthLayout.jsx","shared/Auth/useAuth.js"],"sourcesContent":["import { Outlet, Navigate } from \"react-router-dom\";\r\nimport Loader from 'components/Loader';\r\nimport useAuth from 'shared/Auth/useAuth';\r\n\r\nconst AuthLayout = () => {\r\n    const { isLoading, authenticated } = useAuth();\r\n\r\n    return isLoading ? (\r\n        <Loader />\r\n    ) : authenticated ? (\r\n        <Navigate to=\"/home\" />\r\n    ) : (\r\n        <Outlet />\r\n    );\r\n};\r\n\r\nexport default AuthLayout;\r\n","import { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { localstorageService } from \"utils/localStorageService\";\r\nimport { useGetUserQuery } from \"apis/auth.api\";\r\nimport { loginSuccess, resetUser } from \"slices/userSlice\";\r\n\r\nconst useAuth = () => {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(state => state?.user?.userInfo)\r\n    const { data, isSuccess, isError, error, isLoading } = useGetUserQuery(\r\n        localstorageService.getToken(),\r\n        { skip: Boolean(user?.id) || !(localstorageService.getToken() || localstorageService.getRefreshToken()) }\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (isSuccess && !Boolean(user?.email)) {\r\n            dispatch(loginSuccess(data));\r\n        }\r\n    }, [isSuccess, data, dispatch, user.email])\r\n\r\n    if (isLoading) {\r\n        return { isLoading, authenticated: false };\r\n    }\r\n\r\n    if (isError) {\r\n        console.log(error, \"error\")\r\n        dispatch(resetUser());\r\n        localstorageService.logout();\r\n        return { isLoading, authenticated: false };\r\n    }\r\n\r\n    return {\r\n        authenticated: isSuccess || (Boolean(user?.id) && localstorageService.getToken()),\r\n        isLoading\r\n    };\r\n};\r\n\r\nexport default useAuth;\r\n"],"names":["AuthLayout","isLoading","authenticated","useAuth","_jsx","Loader","Navigate","to","Outlet","dispatch","useDispatch","user","useSelector","state","_state$user","userInfo","data","isSuccess","isError","error","useGetUserQuery","localstorageService","getToken","skip","Boolean","id","getRefreshToken","useEffect","email","loginSuccess","console","log","resetUser","logout"],"sourceRoot":""}